(window.webpackJsonp=window.webpackJsonp||[]).push([[104],{562:function(t,a,e){"use strict";e.r(a);var r=e(62),s=Object(r.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"rules"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#rules"}},[t._v("#")]),t._v(" Rules")]),t._v(" "),e("p",[t._v("A "),e("code",[t._v("Rules")]),t._v(" object is of type "),e("code",[t._v("Record<string, Rule[]>")]),t._v(". The key specifies who has made the rule. The key can for example be "),e("code",[t._v('"merchant"')]),t._v(", "),e("code",[t._v('"agent"')]),t._v(" or "),e("code",[t._v('"master"')]),t._v(".")]),t._v(" "),e("p",[t._v("A merchant can have rules added to them. These rules can control if authorizations, captures, refunds or voids get rejected based on some criteria. "),e("RouterLink",{attrs:{to:"/merchant/merchant/rules.html#how-to-write-a-rule"}},[t._v("Read more of how to write a Rule")]),t._v(".")],1),t._v(" "),e("p",[t._v("Merchant rules can be "),e("RouterLink",{attrs:{to:"/merchant/merchant/update.html"}},[t._v("updated simultaneously with merchant information with a PATCH call")]),t._v(" or seperatly with a PATCH or PUT call to merchant/merchant_id/rule.")],1),t._v(" "),e("p",[t._v("The Rules specified by the key "),e("code",[t._v('"master"')]),t._v(" are rules set up by the acquirer. A PUT call replaces the Record with the rules from the body, while a PATCH call only replaces the array with the same property name as the one in the body.")]),t._v(" "),e("h2",{attrs:{id:"patch-rules"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#patch-rules"}},[t._v("#")]),t._v(" Patch rules")]),t._v(" "),e("p",[t._v("Only a private or agent bearer token is authorized to make this call.")]),t._v(" "),e("p",[t._v("Example PATCH request:")]),t._v(" "),e("div",{staticClass:"language-JSON extra-class"},[e("div",{staticClass:"highlight-lines"},[e("div",{staticClass:"highlighted"},[t._v(" ")]),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br")]),e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[t._v("PATCH /v1/merchant/"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("id/rule\n\nContent-Type"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" application/json\nAuthorization"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Bearer <private.api.key> or <agent.api.key>\n\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"agent"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"reject refund if merchant.refundable<0"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"merchant"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"reject capture if !authorization.currency:(EUR|SEK)"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"reject capture if authorization.currency:(EUR) merchant.captured > 25000"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"reject capture if authorization.currency:(SEK) merchant.captured > 250000"')]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("h2",{attrs:{id:"put-rules"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#put-rules"}},[t._v("#")]),t._v(" Put rules")]),t._v(" "),e("p",[t._v('Only an acquirer can make this call (agent access token with id="master").')]),t._v(" "),e("p",[t._v("Example PUT Rule request:")]),t._v(" "),e("div",{staticClass:"language-JSON extra-class"},[e("div",{staticClass:"highlight-lines"},[e("div",{staticClass:"highlighted"},[t._v(" ")]),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br")]),e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[t._v("PUT /v1/merchant/"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("id/rule\n\nContent-Type"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" application/json\nAuthorization"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Bearer <master access_token>\n\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"master"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"reject capture if merchant.captured > 250000"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"agent"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"reject refund if merchant.refundable<0"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("h2",{attrs:{id:"how-to-write-a-rule"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#how-to-write-a-rule"}},[t._v("#")]),t._v(" How to write a Rule")]),t._v(" "),e("p",[t._v("A Rule is a string that can be parsed and divided into the folloing parts.")]),t._v(" "),e("p",[e("code",[t._v("action")]),t._v(" "),e("code",[t._v("operation")]),t._v(" if "),e("code",[t._v("condition")])]),t._v(" "),e("ul",[e("li",[e("code",[t._v("action")]),t._v(" is as of yet limited to "),e("code",[t._v('"reject"')]),t._v(".")]),t._v(" "),e("li",[e("code",[t._v("operation")]),t._v(" can be set as "),e("code",[t._v('"authorization"')]),t._v(", "),e("code",[t._v('"capture"')]),t._v(", "),e("code",[t._v('"refund"')]),t._v(" or "),e("code",[t._v('"void"')]),t._v(".")]),t._v(" "),e("li",[e("code",[t._v("condition")]),t._v(" is a boolean expression, created using information from:\n"),e("ul",[e("li",[e("RouterLink",{attrs:{to:"/merchant/authorization/states.html#preauthorization"}},[t._v("PreAuthorization")])],1),t._v(" "),e("li",[e("RouterLink",{attrs:{to:"/merchant/merchant/rules.html#extended-state"}},[t._v("extended PreAuthorization")])],1),t._v(" "),e("li",[e("RouterLink",{attrs:{to:"/merchant/authorization/states.html#postauthorization"}},[t._v("PostAuthorization")]),t._v(".")],1)])])]),t._v(" "),e("p",[t._v("Example rule:")]),t._v(" "),e("p",[e("code",[t._v('"reject capture if merchant.captured > 250000"')])]),t._v(" "),e("p",[t._v("A rule always applies to an "),e("RouterLink",{attrs:{to:"/merchant/authorization/states.html"}},[t._v("authorization state")]),t._v(". An "),e("code",[t._v('"authorization"')]),t._v(" operation is applied to the "),e("RouterLink",{attrs:{to:"/merchant/authorization/states.html#preauthorization"}},[t._v("PreAuthorization State")]),t._v(", e.g. The Rule "),e("code",[t._v('"reject authorization if merchant.captured > 250000"')]),t._v(" will be used to possibly reject an authorization attempt. Whereas, all other operations ("),e("code",[t._v('"capture"')]),t._v(", "),e("code",[t._v('"refund"')]),t._v(" and "),e("code",[t._v('"void"')]),t._v(") are applied to the "),e("RouterLink",{attrs:{to:"/merchant/authorization/states.html#postauthorization"}},[t._v("PostAuthorization State")]),t._v(".")],1),t._v(" "),e("h3",{attrs:{id:"condition"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#condition"}},[t._v("#")]),t._v(" Condition")]),t._v(" "),e("p",[t._v("A condition can be written as a boolean expression or as "),e("RouterLink",{attrs:{to:"/merchant/merchant/function.html"}},[t._v("Functions")]),t._v(" for more human readable rules. "),e("RouterLink",{attrs:{to:"/merchant/merchant/functions.html#how-to-write-functions"}},[t._v("Read more of how to write Functions")]),t._v(".")],1),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("Operator")]),t._v(" "),e("th",[t._v("Description")]),t._v(" "),e("th",[t._v("Example")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[e("code",[t._v(".")])]),t._v(" "),e("td",[t._v("Property of")]),t._v(" "),e("td",[e("code",[t._v("merchant.captured")])])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("+")])]),t._v(" "),e("td",[t._v("Addition")]),t._v(" "),e("td",[e("code",[t._v("merchant.refundable + 2500")])])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("-")])]),t._v(" "),e("td",[t._v("Subtraction")]),t._v(" "),e("td",[e("code",[t._v("merchant.settled - 100")])])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("*")])]),t._v(" "),e("td",[t._v("Multiplication")]),t._v(" "),e("td",[e("code",[t._v("merchant.captured * 2")])])]),t._v(" "),e("tr",[e("td",[e("code",[t._v(":")])]),t._v(" "),e("td",[t._v("Equal to")]),t._v(" "),e("td",[e("code",[t._v("merchant.scheme:visa")])])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("!")])]),t._v(" "),e("td",[t._v("Not")]),t._v(" "),e("td",[e("code",[t._v("!authorization.verification:verified")])])]),t._v(" "),e("tr",[e("td",[t._v("..."),e("code",[t._v("*")])]),t._v(" "),e("td",[t._v("Ends with")]),t._v(" "),e("td",[e("code",[t._v("authorization.created:2021-05-31*")])])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("has(")]),t._v("..."),e("code",[t._v(")")])]),t._v(" "),e("td",[t._v("Has property")]),t._v(" "),e("td",[e("code",[t._v("authorization:has(currency)")])])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("<")])]),t._v(" "),e("td",[t._v("Less than")]),t._v(" "),e("td",[e("code",[t._v("merchant.refundable < -3000")])])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("<=")])]),t._v(" "),e("td",[t._v("Less than or equal to")]),t._v(" "),e("td",[e("code",[t._v("authorization.captured.amount <= 5000")])])]),t._v(" "),e("tr",[e("td",[e("code",[t._v(">")])]),t._v(" "),e("td",[t._v("Greater than")]),t._v(" "),e("td",[e("code",[t._v("authorization.amount > 225")])])]),t._v(" "),e("tr",[e("td",[e("code",[t._v(">=")])]),t._v(" "),e("td",[t._v("Greater than or equal to")]),t._v(" "),e("td",[e("code",[t._v("merchant.captured >= 250000")])])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("|")])]),t._v(" "),e("td",[t._v("Or")]),t._v(" "),e("td",[e("code",[t._v("!authorization.currency:(EUR) | !authorization.card.csc:present")])])]),t._v(" "),e("tr",[e("td",[e("code")]),t._v(" "),e("td",[t._v("And")]),t._v(" "),e("td",[e("code",[t._v("!authorization.recurring:subsequent !authorization.card.csc:present")])])])])]),t._v(" "),e("p",[t._v("Spacing is important when writing a condition.")]),t._v(" "),e("p",[t._v("When writing "),e("code",[t._v("20-12-24")]),t._v(" is a string whereas "),e("code",[t._v("20 - 12 - 24")]),t._v(" is a number.")]),t._v(" "),e("p",[t._v("Space can also be used as an AND-operator to chain several conditions together.")]),t._v(" "),e("h3",{attrs:{id:"extended-state"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#extended-state"}},[t._v("#")]),t._v(" Extended State")]),t._v(" "),e("p",[t._v("Depending on which "),e("RouterLink",{attrs:{to:"/merchant/merchant/update.html#guards"}},[t._v("guards")]),t._v(" are set on a merchant, the "),e("RouterLink",{attrs:{to:"/merchant/authorization/states.html#preauthorization"}},[t._v("PreAuthorization")]),t._v(" on which the rules apply, will contain additional information regarding the transaction under the field "),e("code",[t._v("authorization")]),t._v(".")],1),t._v(" "),e("h4",{attrs:{id:"iin"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#iin"}},[t._v("#")]),t._v(" Iin")]),t._v(" "),e("p",[t._v("The iin Guard will add information about the country of the card issuer on the "),e("code",[t._v("authorization.card")]),t._v(" property on the "),e("RouterLink",{attrs:{to:"/merchant/authorization/states.html#preauthorization"}},[t._v("PreAuthorization")]),t._v(".")],1),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("Property")]),t._v(" "),e("th",[t._v("Type")]),t._v(" "),e("th",[t._v("Description")]),t._v(" "),e("th",[t._v("Optional")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[e("code",[t._v("country")])]),t._v(" "),e("td",[e("RouterLink",{attrs:{to:"/merchant/common/reference.html#alpha2"}},[e("code",[t._v("Alpha2")])])],1),t._v(" "),e("td"),t._v(" "),e("td",[t._v("Yes")])])])]),t._v(" "),e("p",[t._v("Example of the information added to the "),e("RouterLink",{attrs:{to:"/merchant/authorization/states.html#preauthorization"}},[t._v("PreAuthorization")]),t._v(":")],1),t._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"authorization"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"card"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"country"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"SE"')]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("Example Rule:")]),t._v(" "),e("p",[e("code",[t._v("reject authorization if authorization.card.country:within(SE, NO, FI, DK)")])]),t._v(" "),e("h4",{attrs:{id:"ipcountry"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ipcountry"}},[t._v("#")]),t._v(" IpCountry")]),t._v(" "),e("p",[t._v("The "),e("code",[t._v("ipCountry")]),t._v(" Guard will add information about the country of the card holders ip on the "),e("code",[t._v("authorization.ip.country")]),t._v(" property on the "),e("RouterLink",{attrs:{to:"/merchant/authorization/states.html#preauthorization"}},[t._v("PreAuthorization")]),t._v(".")],1),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("Property")]),t._v(" "),e("th",[t._v("Type")]),t._v(" "),e("th",[t._v("Description")]),t._v(" "),e("th",[t._v("Optional")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[e("code",[t._v("country")])]),t._v(" "),e("td",[e("RouterLink",{attrs:{to:"/merchant/common/reference.html#alpha2"}},[e("code",[t._v("Alpha2")])])],1),t._v(" "),e("td"),t._v(" "),e("td",[t._v("Yes")])])])]),t._v(" "),e("p",[t._v("Example of the information added to the "),e("RouterLink",{attrs:{to:"/merchant/authorization/states.html#preauthorization"}},[t._v("PreAuthorization")]),t._v(":")],1),t._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"authorization"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"ip"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"country"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"SE"')]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("Example Rule:")]),t._v(" "),e("p",[e("code",[t._v("reject authorization if authorization.ip.country:within(SE, NO, FI, DK)")])]),t._v(" "),e("h4",{attrs:{id:"card"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#card"}},[t._v("#")]),t._v(" Card")]),t._v(" "),e("p",[t._v("The card Guard will add information about the history of card being used with a merchant, this information will be added on the "),e("code",[t._v("authorization.card")]),t._v(" property on the "),e("RouterLink",{attrs:{to:"/merchant/authorization/states.html#preauthorization"}},[t._v("PreAuthoirzation")]),t._v(".")],1),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("Property")]),t._v(" "),e("th",[t._v("Type")]),t._v(" "),e("th",[t._v("Description")]),t._v(" "),e("th",[t._v("Optional")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[e("code",[t._v("amount")])]),t._v(" "),e("td",[e("RouterLink",{attrs:{to:"/merchant/merchant/rules.html#lastdays"}},[e("code",[t._v("LastDays")])])],1),t._v(" "),e("td",[t._v("Total amount for tha past 1-5 days (converted to merchant's currency)")]),t._v(" "),e("td",[t._v("Yes")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("transactions")])]),t._v(" "),e("td",[e("RouterLink",{attrs:{to:"/merchant/merchant/rules.html#lastdays"}},[e("code",[t._v("LastDays")])])],1),t._v(" "),e("td",[t._v("Number of transaction for the past 1-5 days")]),t._v(" "),e("td",[t._v("Yes")])])])]),t._v(" "),e("p",[t._v("Example of the information added to the "),e("RouterLink",{attrs:{to:"/merchant/authorization/states.html#preauthorization"}},[t._v("PreAuthorization")]),t._v(":")],1),t._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"authorization"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"card"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"amount"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"last1days"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("6.53")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"last2days"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("14.7")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"last3days"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("25.45")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"last4days"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("25.45")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"last5days"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("33.2")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"transactions"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"last1days"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"last2days"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"last3days"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"last4days"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"last5days"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("Example Rules:")]),t._v(" "),e("p",[e("code",[t._v("reject authorization if authorization.card.amount.last3Days>500")])]),t._v(" "),e("p",[e("code",[t._v("reject authorization if authorization.card.transactions.last4Days>10")])]),t._v(" "),e("h4",{attrs:{id:"email"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#email"}},[t._v("#")]),t._v(" Email")]),t._v(" "),e("p",[t._v("The email Guard will add information about the history of emails being used with a merchant, this information will be added on the "),e("code",[t._v("authorization")]),t._v(" property on the "),e("RouterLink",{attrs:{to:"/merchant/authorization/state.html#preauthorization"}},[t._v("PreAuthorization")]),t._v(".")],1),t._v(" "),e("p",[t._v("Note that email must always be set on contact.email on the "),e("RouterLink",{attrs:{to:"/merchant/verification/reference.html#creatable"}},[t._v("verification creatable")]),t._v(" when creating the verification for this rule to apply.")],1),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("Property")]),t._v(" "),e("th",[t._v("Type")]),t._v(" "),e("th",[t._v("Description")]),t._v(" "),e("th",[t._v("Optional")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[e("code",[t._v("amount")])]),t._v(" "),e("td",[e("RouterLink",{attrs:{to:"/merchant/merchant/rules.html#lastdays"}},[e("code",[t._v("LastDays")])])],1),t._v(" "),e("td",[t._v("Total amount accosiated with an email for tha past 1-5 days (converted to merchant's currency)")]),t._v(" "),e("td",[t._v("Yes")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("transactions")])]),t._v(" "),e("td",[e("RouterLink",{attrs:{to:"/merchant/merchant/rules.html#lastdays"}},[e("code",[t._v("LastDays")])])],1),t._v(" "),e("td",[t._v("Number of transaction accosiated with an email for the past 1-5 days")]),t._v(" "),e("td",[t._v("Yes")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("card")])]),t._v(" "),e("td",[e("RouterLink",{attrs:{to:"/merchant/merchant/rules.html#lastdays"}},[e("code",[t._v("LastDays")])])],1),t._v(" "),e("td",[t._v("Number of transaction an email has been used in combination with the card for the past 1-5 days")]),t._v(" "),e("td",[t._v("Yes")])])])]),t._v(" "),e("p",[t._v("Example of the information added to the "),e("RouterLink",{attrs:{to:"/merchant/authorization/states.html#preauthorization"}},[t._v("PreAuthorization")]),t._v(":")],1),t._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"authorization"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"email"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"amount"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"last1days"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("15.5")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"last2days"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("15.5")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"last3days"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("33.4")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"last4days"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("33.4")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"last5days"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("70.25")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"transactions"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"last1days"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"last2days"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"last3days"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"last4days"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"last5days"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"card"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"last1days"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"last2days"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"last3days"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"last4days"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"last5days"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("Example Rules:")]),t._v(" "),e("p",[e("code",[t._v("reject authorization if authorization.email.amount.last3Days>500")])]),t._v(" "),e("p",[e("code",[t._v("reject authorization if authorization.email.transactions.last4Days>10")])]),t._v(" "),e("p",[e("code",[t._v("reject authorization if authorization.email.card.last4Days>3")])]),t._v(" "),e("h4",{attrs:{id:"lastdays"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#lastdays"}},[t._v("#")]),t._v(" LastDays")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("Property")]),t._v(" "),e("th",[t._v("Type")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[e("code",[t._v("last1days")])]),t._v(" "),e("td",[t._v("number")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("last2days")])]),t._v(" "),e("td",[t._v("number")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("last3days")])]),t._v(" "),e("td",[t._v("number")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("last4days")])]),t._v(" "),e("td",[t._v("number")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("last5days")])]),t._v(" "),e("td",[t._v("number")])])])])])}),[],!1,null,null,null);a.default=s.exports}}]);